{"ast":null,"code":"var _jsxFileName = \"/Users/wangbaiyuan/Documents/Wehelp/Part3/Vcard/client/src/components/home-component.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport AuthService from \"../services/auth-service\";\nimport BoardListComponent from \"./boardList-component\";\nimport ArticleListComponent from \"./articleList-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction HomeComponent({\n  currentUser,\n  setCurrentUser\n}) {\n  _s();\n  const [searchParams] = useSearchParams();\n  const [selectedBoard, setSelectedBoard] = useState(null); // null 表示所有文章\n\n  useEffect(() => {\n    const token = searchParams.get(\"token\");\n    const name = searchParams.get(\"name\");\n    const id = searchParams.get(\"id\");\n    // 如果 token 存在，儲存到 localStorage\n    if (token) {\n      const Obj = {\n        token: token,\n        name,\n        id\n      };\n      localStorage.setItem(\"user\", JSON.stringify(Obj));\n      console.log(\"已將token存進localStorage\");\n      setCurrentUser(AuthService.getCurrentUser());\n    }\n  }, [searchParams, setCurrentUser]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" bg-blue-900 min-h-screen h-[56]\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mx-auto max-w-screen-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-none w-1/4 mr-5\",\n        children: /*#__PURE__*/_jsxDEV(BoardListComponent, {\n          setSelectedBoard: setSelectedBoard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-grow\",\n        children: /*#__PURE__*/_jsxDEV(ArticleListComponent, {\n          board: selectedBoard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n}\n_s(HomeComponent, \"jg77O2AJdWRmlNbDhWhX8WseBcU=\", false, function () {\n  return [useSearchParams];\n});\n_c = HomeComponent;\nexport default HomeComponent;\n\n// const [text, setText] = useState(\"\");\n// const [image, setImage] = useState(null);\n// const [posts, setPosts] = useState([]);\n// const [refreshPosts, setrefreshPosts] = useState(false);\n// const fileInputRef = useRef(null);\n// const textInputRef = useRef(null);\n\n// const handleText = (e) => {\n//   setText(e.target.value);\n// };\n\n// const handleImage = (e) => {\n//   setImage(e.target.files[0]);\n// };\n\n// useEffect(() => {\n//   const fetchData = async () => {\n//     const response = await fetch(\"/api/getAllPosts\");\n//     if (!response.ok) {\n//       throw new Error(\"Network response was not ok\");\n//     }\n//     const data = await response.json();\n//     console.log(\"前端取得資料\", data);\n//     setPosts(data);\n//     setrefreshPosts(false);\n//   };\n\n//   fetchData();\n// }, [refreshPosts]);\n\n// const handleSubmit = async (e) => {\n//   e.preventDefault();\n\n//   const formData = new FormData();\n//   formData.append(\"text\", text);\n//   formData.append(\"image\", image);\n\n//   const response = await fetch(\"/api/post\", {\n//     method: \"POST\",\n//     body: formData,\n//   });\n\n//   if (response.ok) {\n//     console.log(\"ok\");\n//     // 提交成功直接執行取得資料\n//     setrefreshPosts(true);\n//     setText(\"\");\n//     setImage(null);\n//     fileInputRef.current.value = \"\";\n//     textInputRef.current.value = \"\";\n//   } else {\n//     console.log(\"not ok\");\n//   }\n// };\n\n// <div style={{ margin: \"100px\" }}>\n//   <form onSubmit={handleSubmit}>\n//     <h2>github action6 發表一篇圖文</h2>\n//     <br />\n//     <div className=\"form-group\">\n//       <label>文字內容:</label>\n//       <input\n//         className=\"form-control\"\n//         type=\"text\"\n//         onChange={handleText}\n//         ref={textInputRef}\n//       ></input>\n//     </div>\n//     <br />\n//     <div>\n//       <label>圖片檔案:</label>\n//       <input\n//         className=\"form-control\"\n//         type=\"file\"\n//         onChange={handleImage}\n//         ref={fileInputRef}\n//       ></input>\n//     </div>\n//     <br />\n//     <div className=\"form-group\">\n//       <button className=\"btn btn-primary btn-block\" type=\"submit\">\n//         送出\n//       </button>\n//     </div>\n//   </form>\n//   <hr />\n//   <div>\n//     <h3>所有圖文</h3>\n//     {posts.map((post) => (\n//       <div key={post.id}>\n//         <p>{post.text}</p>\n//         <img\n//           src={post.image_url}\n//           alt=\"Uploaded content\"\n//           style={{ maxHeight: \"100px\" }}\n//         />\n//         <hr />\n//       </div>\n//     ))}\n//   </div>\n// </div>\nvar _c;\n$RefreshReg$(_c, \"HomeComponent\");","map":{"version":3,"names":["React","useEffect","useState","useSearchParams","AuthService","BoardListComponent","ArticleListComponent","jsxDEV","_jsxDEV","HomeComponent","currentUser","setCurrentUser","_s","searchParams","selectedBoard","setSelectedBoard","token","get","name","id","Obj","localStorage","setItem","JSON","stringify","console","log","getCurrentUser","className","children","fileName","_jsxFileName","lineNumber","columnNumber","board","_c","$RefreshReg$"],"sources":["/Users/wangbaiyuan/Documents/Wehelp/Part3/Vcard/client/src/components/home-component.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\nimport AuthService from \"../services/auth-service\";\nimport BoardListComponent from \"./boardList-component\";\nimport ArticleListComponent from \"./articleList-component\";\n\nfunction HomeComponent({ currentUser, setCurrentUser }) {\n  const [searchParams] = useSearchParams();\n  const [selectedBoard, setSelectedBoard] = useState(null); // null 表示所有文章\n\n  useEffect(() => {\n    const token = searchParams.get(\"token\");\n    const name = searchParams.get(\"name\");\n    const id = searchParams.get(\"id\");\n    // 如果 token 存在，儲存到 localStorage\n    if (token) {\n      const Obj = { token: token, name, id };\n      localStorage.setItem(\"user\", JSON.stringify(Obj));\n      console.log(\"已將token存進localStorage\");\n      setCurrentUser(AuthService.getCurrentUser());\n    }\n  }, [searchParams, setCurrentUser]);\n\n  return (\n    <div className=\" bg-blue-900 min-h-screen h-[56]\">\n      <div className=\"flex mx-auto max-w-screen-xl\">\n        <div className=\"flex-none w-1/4 mr-5\">\n          <BoardListComponent setSelectedBoard={setSelectedBoard} />\n        </div>\n        <div className=\"flex-grow\">\n          <ArticleListComponent board={selectedBoard} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomeComponent;\n\n// const [text, setText] = useState(\"\");\n// const [image, setImage] = useState(null);\n// const [posts, setPosts] = useState([]);\n// const [refreshPosts, setrefreshPosts] = useState(false);\n// const fileInputRef = useRef(null);\n// const textInputRef = useRef(null);\n\n// const handleText = (e) => {\n//   setText(e.target.value);\n// };\n\n// const handleImage = (e) => {\n//   setImage(e.target.files[0]);\n// };\n\n// useEffect(() => {\n//   const fetchData = async () => {\n//     const response = await fetch(\"/api/getAllPosts\");\n//     if (!response.ok) {\n//       throw new Error(\"Network response was not ok\");\n//     }\n//     const data = await response.json();\n//     console.log(\"前端取得資料\", data);\n//     setPosts(data);\n//     setrefreshPosts(false);\n//   };\n\n//   fetchData();\n// }, [refreshPosts]);\n\n// const handleSubmit = async (e) => {\n//   e.preventDefault();\n\n//   const formData = new FormData();\n//   formData.append(\"text\", text);\n//   formData.append(\"image\", image);\n\n//   const response = await fetch(\"/api/post\", {\n//     method: \"POST\",\n//     body: formData,\n//   });\n\n//   if (response.ok) {\n//     console.log(\"ok\");\n//     // 提交成功直接執行取得資料\n//     setrefreshPosts(true);\n//     setText(\"\");\n//     setImage(null);\n//     fileInputRef.current.value = \"\";\n//     textInputRef.current.value = \"\";\n//   } else {\n//     console.log(\"not ok\");\n//   }\n// };\n\n// <div style={{ margin: \"100px\" }}>\n//   <form onSubmit={handleSubmit}>\n//     <h2>github action6 發表一篇圖文</h2>\n//     <br />\n//     <div className=\"form-group\">\n//       <label>文字內容:</label>\n//       <input\n//         className=\"form-control\"\n//         type=\"text\"\n//         onChange={handleText}\n//         ref={textInputRef}\n//       ></input>\n//     </div>\n//     <br />\n//     <div>\n//       <label>圖片檔案:</label>\n//       <input\n//         className=\"form-control\"\n//         type=\"file\"\n//         onChange={handleImage}\n//         ref={fileInputRef}\n//       ></input>\n//     </div>\n//     <br />\n//     <div className=\"form-group\">\n//       <button className=\"btn btn-primary btn-block\" type=\"submit\">\n//         送出\n//       </button>\n//     </div>\n//   </form>\n//   <hr />\n//   <div>\n//     <h3>所有圖文</h3>\n//     {posts.map((post) => (\n//       <div key={post.id}>\n//         <p>{post.text}</p>\n//         <img\n//           src={post.image_url}\n//           alt=\"Uploaded content\"\n//           style={{ maxHeight: \"100px\" }}\n//         />\n//         <hr />\n//       </div>\n//     ))}\n//   </div>\n// </div>\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,eAAe,QAAQ,kBAAkB;AAClD,OAAOC,WAAW,MAAM,0BAA0B;AAClD,OAAOC,kBAAkB,MAAM,uBAAuB;AACtD,OAAOC,oBAAoB,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,SAASC,aAAaA,CAAC;EAAEC,WAAW;EAAEC;AAAe,CAAC,EAAE;EAAAC,EAAA;EACtD,MAAM,CAACC,YAAY,CAAC,GAAGV,eAAe,CAAC,CAAC;EACxC,MAAM,CAACW,aAAa,EAAEC,gBAAgB,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE1DD,SAAS,CAAC,MAAM;IACd,MAAMe,KAAK,GAAGH,YAAY,CAACI,GAAG,CAAC,OAAO,CAAC;IACvC,MAAMC,IAAI,GAAGL,YAAY,CAACI,GAAG,CAAC,MAAM,CAAC;IACrC,MAAME,EAAE,GAAGN,YAAY,CAACI,GAAG,CAAC,IAAI,CAAC;IACjC;IACA,IAAID,KAAK,EAAE;MACT,MAAMI,GAAG,GAAG;QAAEJ,KAAK,EAAEA,KAAK;QAAEE,IAAI;QAAEC;MAAG,CAAC;MACtCE,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,GAAG,CAAC,CAAC;MACjDK,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;MACpCf,cAAc,CAACP,WAAW,CAACuB,cAAc,CAAC,CAAC,CAAC;IAC9C;EACF,CAAC,EAAE,CAACd,YAAY,EAAEF,cAAc,CAAC,CAAC;EAElC,oBACEH,OAAA;IAAKoB,SAAS,EAAC,kCAAkC;IAAAC,QAAA,eAC/CrB,OAAA;MAAKoB,SAAS,EAAC,8BAA8B;MAAAC,QAAA,gBAC3CrB,OAAA;QAAKoB,SAAS,EAAC,sBAAsB;QAAAC,QAAA,eACnCrB,OAAA,CAACH,kBAAkB;UAACU,gBAAgB,EAAEA;QAAiB;UAAAe,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvD,CAAC,eACNzB,OAAA;QAAKoB,SAAS,EAAC,WAAW;QAAAC,QAAA,eACxBrB,OAAA,CAACF,oBAAoB;UAAC4B,KAAK,EAAEpB;QAAc;UAAAgB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACrB,EAAA,CA7BQH,aAAa;EAAA,QACGN,eAAe;AAAA;AAAAgC,EAAA,GAD/B1B,aAAa;AA+BtB,eAAeA,aAAa;;AAE5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}