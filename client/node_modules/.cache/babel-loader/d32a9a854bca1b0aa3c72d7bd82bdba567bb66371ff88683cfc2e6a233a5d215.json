{"ast":null,"code":"import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport { isPromise } from '../../utils/tool';\nimport getUploadPlaceholder from '../../utils/uploadPlaceholder';\nimport InputFile from './inputFile';\nvar Image = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Image, _PluginComponent);\n  function Image(props) {\n    var _this;\n    _this = _PluginComponent.call(this, props) || this;\n    _this.inputFile = /*#__PURE__*/React.createRef();\n    _this.onImageChanged = _this.onImageChanged.bind(_assertThisInitialized(_this));\n    _this.handleCustomImageUpload = _this.handleCustomImageUpload.bind(_assertThisInitialized(_this));\n    _this.handleImageUpload = _this.handleImageUpload.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n  var _proto = Image.prototype;\n  _proto.handleImageUpload = function handleImageUpload() {\n    var onImageUpload = this.editorConfig.onImageUpload;\n    if (typeof onImageUpload === 'function') {\n      if (this.inputFile.current) {\n        this.inputFile.current.click();\n      }\n    } else {\n      this.editor.insertMarkdown('image');\n    }\n  };\n  _proto.onImageChanged = function onImageChanged(file) {\n    var onImageUpload = this.editorConfig.onImageUpload;\n    if (onImageUpload) {\n      var placeholder = getUploadPlaceholder(file, onImageUpload);\n      this.editor.insertPlaceholder(placeholder.placeholder, placeholder.uploaded);\n    }\n  };\n  _proto.handleCustomImageUpload = function handleCustomImageUpload(e) {\n    var _this2 = this;\n    var onCustomImageUpload = this.editorConfig.onCustomImageUpload;\n    if (onCustomImageUpload) {\n      var res = onCustomImageUpload.call(this, e);\n      if (isPromise(res)) {\n        res.then(function (result) {\n          if (result && result.url) {\n            _this2.editor.insertMarkdown('image', {\n              target: result.text,\n              imageUrl: result.url\n            });\n          }\n        });\n      }\n    }\n  };\n  _proto.render = function render() {\n    var _this3 = this;\n    var isCustom = !!this.editorConfig.onCustomImageUpload;\n    return isCustom ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleCustomImageUpload\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    })) : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleImageUpload,\n      style: {\n        position: 'relative'\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    }), /*#__PURE__*/React.createElement(InputFile, {\n      accept: this.editorConfig.imageAccept || '',\n      ref: this.inputFile,\n      onChange: function onChange(e) {\n        e.persist();\n        if (e.target.files && e.target.files.length > 0) {\n          _this3.onImageChanged(e.target.files[0]);\n        }\n      }\n    }));\n  };\n  return Image;\n}(PluginComponent);\nImage.pluginName = 'image';\nexport { Image as default };","map":{"version":3,"names":["_assertThisInitialized","_inheritsLoose","React","Icon","i18n","PluginComponent","isPromise","getUploadPlaceholder","InputFile","Image","_PluginComponent","props","_this","call","inputFile","createRef","onImageChanged","bind","handleCustomImageUpload","handleImageUpload","state","show","_proto","prototype","onImageUpload","editorConfig","current","click","editor","insertMarkdown","file","placeholder","insertPlaceholder","uploaded","e","_this2","onCustomImageUpload","res","then","result","url","target","text","imageUrl","render","_this3","isCustom","createElement","className","title","get","onClick","type","style","position","accept","imageAccept","ref","onChange","persist","files","length","pluginName","default"],"sources":["/Users/wangbaiyuan/Documents/Wehelp/Part3/Vcard/client/node_modules/react-markdown-editor-lite/esm/plugins/Image/index.js"],"sourcesContent":["import _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../../components/Icon';\nimport i18n from '../../i18n';\nimport { PluginComponent } from '../Plugin';\nimport { isPromise } from '../../utils/tool';\nimport getUploadPlaceholder from '../../utils/uploadPlaceholder';\nimport InputFile from './inputFile';\n\nvar Image = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(Image, _PluginComponent);\n\n  function Image(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.inputFile = /*#__PURE__*/React.createRef();\n    _this.onImageChanged = _this.onImageChanged.bind(_assertThisInitialized(_this));\n    _this.handleCustomImageUpload = _this.handleCustomImageUpload.bind(_assertThisInitialized(_this));\n    _this.handleImageUpload = _this.handleImageUpload.bind(_assertThisInitialized(_this));\n    _this.state = {\n      show: false\n    };\n    return _this;\n  }\n\n  var _proto = Image.prototype;\n\n  _proto.handleImageUpload = function handleImageUpload() {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (typeof onImageUpload === 'function') {\n      if (this.inputFile.current) {\n        this.inputFile.current.click();\n      }\n    } else {\n      this.editor.insertMarkdown('image');\n    }\n  };\n\n  _proto.onImageChanged = function onImageChanged(file) {\n    var onImageUpload = this.editorConfig.onImageUpload;\n\n    if (onImageUpload) {\n      var placeholder = getUploadPlaceholder(file, onImageUpload);\n      this.editor.insertPlaceholder(placeholder.placeholder, placeholder.uploaded);\n    }\n  };\n\n  _proto.handleCustomImageUpload = function handleCustomImageUpload(e) {\n    var _this2 = this;\n\n    var onCustomImageUpload = this.editorConfig.onCustomImageUpload;\n\n    if (onCustomImageUpload) {\n      var res = onCustomImageUpload.call(this, e);\n\n      if (isPromise(res)) {\n        res.then(function (result) {\n          if (result && result.url) {\n            _this2.editor.insertMarkdown('image', {\n              target: result.text,\n              imageUrl: result.url\n            });\n          }\n        });\n      }\n    }\n  };\n\n  _proto.render = function render() {\n    var _this3 = this;\n\n    var isCustom = !!this.editorConfig.onCustomImageUpload;\n    return isCustom ? /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleCustomImageUpload\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    })) : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-image\",\n      title: i18n.get('btnImage'),\n      onClick: this.handleImageUpload,\n      style: {\n        position: 'relative'\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"image\"\n    }), /*#__PURE__*/React.createElement(InputFile, {\n      accept: this.editorConfig.imageAccept || '',\n      ref: this.inputFile,\n      onChange: function onChange(e) {\n        e.persist();\n\n        if (e.target.files && e.target.files.length > 0) {\n          _this3.onImageChanged(e.target.files[0]);\n        }\n      }\n    }));\n  };\n\n  return Image;\n}(PluginComponent);\n\nImage.pluginName = 'image';\nexport { Image as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}