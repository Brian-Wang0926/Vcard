{"ast":null,"code":"import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport i18n from '../i18n';\nimport { PluginComponent } from './Plugin';\nvar NEXT_ACTION;\n(function (NEXT_ACTION) {\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_ALL\"] = 0] = \"SHOW_ALL\";\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_MD\"] = 1] = \"SHOW_MD\";\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_HTML\"] = 2] = \"SHOW_HTML\";\n})(NEXT_ACTION || (NEXT_ACTION = {}));\nvar ModeToggle = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(ModeToggle, _PluginComponent);\n  function ModeToggle(props) {\n    var _this;\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.state = {\n      view: _this.editor.getView()\n    };\n    return _this;\n  }\n  var _proto = ModeToggle.prototype;\n  _proto.handleClick = function handleClick() {\n    switch (this.next) {\n      case NEXT_ACTION.SHOW_ALL:\n        this.editor.setView({\n          html: true,\n          md: true\n        });\n        break;\n      case NEXT_ACTION.SHOW_HTML:\n        this.editor.setView({\n          html: true,\n          md: false\n        });\n        break;\n      case NEXT_ACTION.SHOW_MD:\n        this.editor.setView({\n          html: false,\n          md: true\n        });\n        break;\n    }\n  };\n  _proto.handleChange = function handleChange(view) {\n    this.setState({\n      view: view\n    });\n  };\n  _proto.componentDidMount = function componentDidMount() {\n    this.editor.on('viewchange', this.handleChange);\n  };\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.off('viewchange', this.handleChange);\n  };\n  _proto.getDisplayInfo = function getDisplayInfo() {\n    var next = this.next;\n    switch (next) {\n      case NEXT_ACTION.SHOW_ALL:\n        return {\n          icon: 'view-split',\n          title: 'All'\n        };\n      case NEXT_ACTION.SHOW_HTML:\n        return {\n          icon: 'visibility',\n          title: 'Preview'\n        };\n      default:\n        return {\n          icon: 'keyboard',\n          title: 'Editor'\n        };\n    }\n  };\n  _proto.render = function render() {\n    if (this.isDisplay) {\n      var display = this.getDisplayInfo();\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"button button-type-mode\",\n        title: i18n.get(\"btnMode\" + display.title),\n        onClick: this.handleClick\n      }, /*#__PURE__*/React.createElement(Icon, {\n        type: display.icon\n      }));\n    }\n    return null;\n  };\n  _createClass(ModeToggle, [{\n    key: \"isDisplay\",\n    get: function get() {\n      var canView = this.editorConfig.canView;\n      if (canView) {\n        // 至少有两种情况可以显示的时候，才会显示切换按钮\n        return [canView.html, canView.md, canView.both].filter(function (it) {\n          return it;\n        }).length >= 2;\n      }\n      return false;\n    }\n    /**\n     * 显示标准：\n     * 两个都显示的时候，点击显示MD，隐藏HTML\n     * 只显示HTML的时候，点击全部显示\n     * 只显示MD的时候，点击显示HTML，隐藏MD\n     * 如果当前标准因canView不可用，则顺延至下一个\n     * 如果都不可用，则返回当前状态\n     */\n  }, {\n    key: \"next\",\n    get: function get() {\n      var canView = this.editorConfig.canView;\n      var view = this.state.view;\n      var actions = [NEXT_ACTION.SHOW_ALL, NEXT_ACTION.SHOW_MD, NEXT_ACTION.SHOW_HTML];\n      if (canView) {\n        if (!canView.both) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_ALL), 1);\n        }\n        if (!canView.md) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_MD), 1);\n        }\n        if (!canView.html) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_HTML), 1);\n        }\n      }\n      var current = NEXT_ACTION.SHOW_MD;\n      if (view.html) {\n        current = NEXT_ACTION.SHOW_HTML;\n      }\n      if (view.html && view.md) {\n        current = NEXT_ACTION.SHOW_ALL;\n      }\n      if (actions.length === 0) return current;\n      if (actions.length === 1) return actions[0];\n      var index = actions.indexOf(current);\n      return index < actions.length - 1 ? actions[index + 1] : actions[0];\n    }\n  }]);\n  return ModeToggle;\n}(PluginComponent);\nModeToggle.pluginName = 'mode-toggle';\nModeToggle.align = 'right';\nexport default ModeToggle;","map":{"version":3,"names":["_createClass","_assertThisInitialized","_inheritsLoose","React","Icon","i18n","PluginComponent","NEXT_ACTION","ModeToggle","_PluginComponent","props","_this","call","handleClick","bind","handleChange","state","view","editor","getView","_proto","prototype","next","SHOW_ALL","setView","html","md","SHOW_HTML","SHOW_MD","setState","componentDidMount","on","componentWillUnmount","off","getDisplayInfo","icon","title","render","isDisplay","display","createElement","className","get","onClick","type","key","canView","editorConfig","both","filter","it","length","actions","splice","indexOf","current","index","pluginName","align"],"sources":["/Users/wangbaiyuan/Documents/Wehelp/Part3/Vcard/client/node_modules/react-markdown-editor-lite/esm/plugins/modeToggle.js"],"sourcesContent":["import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport i18n from '../i18n';\nimport { PluginComponent } from './Plugin';\nvar NEXT_ACTION;\n\n(function (NEXT_ACTION) {\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_ALL\"] = 0] = \"SHOW_ALL\";\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_MD\"] = 1] = \"SHOW_MD\";\n  NEXT_ACTION[NEXT_ACTION[\"SHOW_HTML\"] = 2] = \"SHOW_HTML\";\n})(NEXT_ACTION || (NEXT_ACTION = {}));\n\nvar ModeToggle = /*#__PURE__*/function (_PluginComponent) {\n  _inheritsLoose(ModeToggle, _PluginComponent);\n\n  function ModeToggle(props) {\n    var _this;\n\n    _this = _PluginComponent.call(this, props) || this;\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.state = {\n      view: _this.editor.getView()\n    };\n    return _this;\n  }\n\n  var _proto = ModeToggle.prototype;\n\n  _proto.handleClick = function handleClick() {\n    switch (this.next) {\n      case NEXT_ACTION.SHOW_ALL:\n        this.editor.setView({\n          html: true,\n          md: true\n        });\n        break;\n\n      case NEXT_ACTION.SHOW_HTML:\n        this.editor.setView({\n          html: true,\n          md: false\n        });\n        break;\n\n      case NEXT_ACTION.SHOW_MD:\n        this.editor.setView({\n          html: false,\n          md: true\n        });\n        break;\n    }\n  };\n\n  _proto.handleChange = function handleChange(view) {\n    this.setState({\n      view: view\n    });\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.editor.on('viewchange', this.handleChange);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.editor.off('viewchange', this.handleChange);\n  };\n\n  _proto.getDisplayInfo = function getDisplayInfo() {\n    var next = this.next;\n\n    switch (next) {\n      case NEXT_ACTION.SHOW_ALL:\n        return {\n          icon: 'view-split',\n          title: 'All'\n        };\n\n      case NEXT_ACTION.SHOW_HTML:\n        return {\n          icon: 'visibility',\n          title: 'Preview'\n        };\n\n      default:\n        return {\n          icon: 'keyboard',\n          title: 'Editor'\n        };\n    }\n  };\n\n  _proto.render = function render() {\n    if (this.isDisplay) {\n      var display = this.getDisplayInfo();\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"button button-type-mode\",\n        title: i18n.get(\"btnMode\" + display.title),\n        onClick: this.handleClick\n      }, /*#__PURE__*/React.createElement(Icon, {\n        type: display.icon\n      }));\n    }\n\n    return null;\n  };\n\n  _createClass(ModeToggle, [{\n    key: \"isDisplay\",\n    get: function get() {\n      var canView = this.editorConfig.canView;\n\n      if (canView) {\n        // 至少有两种情况可以显示的时候，才会显示切换按钮\n        return [canView.html, canView.md, canView.both].filter(function (it) {\n          return it;\n        }).length >= 2;\n      }\n\n      return false;\n    }\n    /**\n     * 显示标准：\n     * 两个都显示的时候，点击显示MD，隐藏HTML\n     * 只显示HTML的时候，点击全部显示\n     * 只显示MD的时候，点击显示HTML，隐藏MD\n     * 如果当前标准因canView不可用，则顺延至下一个\n     * 如果都不可用，则返回当前状态\n     */\n\n  }, {\n    key: \"next\",\n    get: function get() {\n      var canView = this.editorConfig.canView;\n      var view = this.state.view;\n      var actions = [NEXT_ACTION.SHOW_ALL, NEXT_ACTION.SHOW_MD, NEXT_ACTION.SHOW_HTML];\n\n      if (canView) {\n        if (!canView.both) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_ALL), 1);\n        }\n\n        if (!canView.md) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_MD), 1);\n        }\n\n        if (!canView.html) {\n          actions.splice(actions.indexOf(NEXT_ACTION.SHOW_HTML), 1);\n        }\n      }\n\n      var current = NEXT_ACTION.SHOW_MD;\n\n      if (view.html) {\n        current = NEXT_ACTION.SHOW_HTML;\n      }\n\n      if (view.html && view.md) {\n        current = NEXT_ACTION.SHOW_ALL;\n      }\n\n      if (actions.length === 0) return current;\n      if (actions.length === 1) return actions[0];\n      var index = actions.indexOf(current);\n      return index < actions.length - 1 ? actions[index + 1] : actions[0];\n    }\n  }]);\n\n  return ModeToggle;\n}(PluginComponent);\n\nModeToggle.pluginName = 'mode-toggle';\nModeToggle.align = 'right';\nexport default ModeToggle;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}